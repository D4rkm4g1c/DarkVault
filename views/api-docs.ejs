<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/css/styles.css">
    <style>
        pre {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
        }
        .endpoint {
            margin-bottom: 30px;
            border-bottom: 1px solid #dee2e6;
            padding-bottom: 20px;
        }
    </style>
</head>
<body>
    <%- include('partials/navbar') %>

    <div class="container mt-5">
        <h1>DarkVault API Documentation</h1>
        <p class="lead">This page documents the available API endpoints for DarkVault.</p>

        <div class="alert alert-warning">
            <i class="bi bi-exclamation-triangle"></i> 
            <strong>Security Note:</strong> This application contains deliberate vulnerabilities for educational purposes.
        </div>

        <h2 class="mt-4 mb-3">Authentication</h2>
        
        <div class="endpoint">
            <h4><span class="badge bg-success">POST</span> /api/auth/login</h4>
            <p>Authenticate a user and receive a JWT token.</p>
            
            <h5>Request</h5>
            <pre><code>Content-Type: application/json

{
  "username": "admin",
  "password": "SecretPassword123!"
}</code></pre>
            
            <h5>Response</h5>
            <pre><code>{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "user": {
    "id": 1,
    "username": "admin",
    "role": "admin",
    "isAdmin": true
  }
}</code></pre>
        </div>

        <div class="endpoint">
            <h4><span class="badge bg-success">POST</span> /api/auth/register</h4>
            <p>Register a new user account.</p>
            
            <h5>Request</h5>
            <pre><code>Content-Type: application/json

{
  "username": "newuser",
  "password": "Password123",
  "email": "user@example.com"
}</code></pre>
            
            <h5>Response</h5>
            <pre><code>{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "user": {
    "id": 5,
    "username": "newuser",
    "role": "user",
    "isAdmin": false
  }
}</code></pre>
        </div>

        <h2 class="mt-4 mb-3">Using Authentication</h2>
        <p>For protected endpoints, include the JWT token in the Authorization header:</p>
        <pre><code>GET /api/users
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...</code></pre>

        <h2 class="mt-4 mb-3">User Endpoints</h2>
        
        <div class="endpoint">
            <h4><span class="badge bg-primary">GET</span> /api/users</h4>
            <p>Get a list of all users (requires authentication).</p>
        </div>
        
        <div class="endpoint">
            <h4><span class="badge bg-primary">GET</span> /api/users/:id</h4>
            <p>Get information about a specific user (requires authentication).</p>
        </div>
        
        <div class="endpoint">
            <h4><span class="badge bg-warning">PUT</span> /api/users/:id</h4>
            <p>Update a user's information (requires authentication).</p>
        </div>

        <h2 class="mt-4 mb-3">Other Endpoints</h2>
        <p>Explore other available endpoints in the application. Note that some endpoints may have vulnerabilities for education purposes.</p>
        
        <div class="mt-5 mb-4">
            <a href="/dashboard" class="btn btn-primary">
                <i class="bi bi-arrow-left"></i> Back to Dashboard
            </a>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html> 